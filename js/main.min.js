!function a(o,s,c){function l(t,e){if(!s[t]){if(!o[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(u)return u(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=s[t]={exports:{}};o[t][0].call(i.exports,function(e){return l(o[t][1][e]||e)},i,i.exports,a,o,s,c)}return s[t].exports}for(var u="function"==typeof require&&require,e=0;e<c.length;e++)l(c[e]);return l}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.render=i;var u=e("../_helpers/_helpers"),d=n(e("../ConfirmButtonsWidget/ConfirmButtonsWidget")),p=n(e("../ThermalWidget/ThermalWidget")),m=n(e("../MusicWidget/MusicWidget"));function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r,n,i=(0,u.getTemplateContent)("CardTemplate"),a=((n={}).main=(r=i).querySelector(".Card"),n.closeButton=r.querySelector(".Card-CloseButton"),n.nextButton=r.querySelector(".Card-NextButton"),n.icon=r.querySelector(".Title-IconWrapper"),n.title=r.querySelector(".Title-Content"),n.source=r.querySelector(".Card-Source"),n.time=r.querySelector(".Card-Time"),n.description=r.querySelector(".Card-Description"),n.data=r.querySelector(".Card-Data"),n);Object.keys(t).forEach(function(e){switch(e){case"type":a.main.classList.add("Card_type_"+t[e]);break;case"size":a.main.classList.add("Card_size_"+t[e]);break;case"icon":if("info"===t.type)a[e].innerHTML=(0,u.getImageHtml)(t[e],"svg","Title-Icon"),a.closeButton.innerHTML=(0,u.getImageHtml)("cross","svg","Card-CrossIcon","Закрыть");else{if("critical"!==t.type)throw Error("Data Error: не корректный тип события.");a[e].innerHTML=(0,u.getImageHtml)(t[e]+"-white","svg","Title-Icon"),a.closeButton.innerHTML=(0,u.getImageHtml)("cross-white","svg","Card-CrossIcon","Закрыть")}a.nextButton.innerHTML=(0,u.getImageHtml)("arrow","svg","Card-NextIcon","Дальше");break;default:if("data"!==e&&Object(t[e])!==t[e])a[e].textContent=t[e];else{if("data"!==e)throw Error("Data error: Не корректный формат данных.");!function(e,t){var r=e,n="graph"===t.type,i="image"in t&&"string"==typeof t.image,a="temperature"in t&&"humidity"in t,o="buttons"in t&&Array.isArray(t.buttons);switch(!0){case n:r.classList.add("Card-Data_type_graph"),r.innerHTML=(0,u.getImageHtml)("richdata","svg","DataImage","График");break;case i:var s=t.image.split("."),c=s[0],l=s[1];r.innerHTML='\n        <div class="Card-DataImageWrapper Card-Data_type_image" touch-action="none">\n          '+(0,u.getImageHtml)(c,l,"DataImage")+'\n        </div>\n        <div class="DataInfo Card-DataInfoWrapper">\n          <div class="DataInfo-Zoom">Приближение: <span class="DataInfo-ZoomValue">0</span>%</div>\n          <div class="DataInfo-Light">Яркость: <span class="DataInfo-LightValue">10</span>%</div>\n        </div>\n      ';break;case a:(0,p.default)(r,t);break;case o:(0,d.default)(r,t);break;case"albumcover"in t&&"artist"in t&&"track"in t&&"volume"in t:(0,m.default)(r,t)}}(a.data,t.data)}}}),Object.keys(a).forEach(function(e){a[e].innerHTML.trim()||a[e].parentNode.removeChild(a[e])});var o=i.querySelector(".Card-Content");o.innerHTML.trim()||o.parentNode.removeChild(o);var s=document.importNode(i,!0);e.appendChild(s)}var a={render:i};r.default=a},{"../ConfirmButtonsWidget/ConfirmButtonsWidget":2,"../MusicWidget/MusicWidget":3,"../ThermalWidget/ThermalWidget":4,"../_helpers/_helpers":6}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};r.default=function(e,t){var r=(0,o.getTemplateContent)("ConfirmButtonsWidgetTemplate"),n=a(t.buttons,2);r.querySelector(".WidgetButton_type_confirm").innerHTML=n[0],r.querySelector(".WidgetButton_type_cancel").innerHTML=n[1];var i=document.importNode(r,!0);e.appendChild(i)};var o=e("../_helpers/_helpers")},{"../_helpers/_helpers":6}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r=(0,l.getTemplateContent)("MusicWidgetTemplate"),n=r.querySelector(".MusicWidget-AlbumImage"),i=r.querySelector(".MusicWidget-TrackArtist"),a=r.querySelector(".MusicWidget-TrackName"),o=r.querySelector(".MusicWidget-TrackDuration"),s=r.querySelector(".MusicWidget-VolumeValue");n.setAttribute("src",t.albumcover),i.innerHTML=t.artist,a.innerHTML=t.track.name,o.innerHTML=t.track.length,s.innerHTML=t.volume;var c=document.importNode(r,!0);e.appendChild(c)};var l=e("../_helpers/_helpers")},{"../_helpers/_helpers":6}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r=(0,i.getTemplateContent)("ThermalWidgetTemplate");r.querySelector(".ThermalWidget-TemperatureValue").innerHTML=t.temperature,r.querySelector(".ThermalWidget-HumidityValue").innerHTML=t.humidity;var n=document.importNode(r,!0);e.appendChild(n)};var i=e("../_helpers/_helpers")},{"../_helpers/_helpers":6}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var b=t,I=e,H=I.parentNode.querySelector(".DataInfo-ZoomValue"),L=I.parentNode.querySelector(".DataInfo-LightValue"),x=1,S=null,q=[];function r(r){var e=b.style.transform,n=null;return e.split(" ").forEach(function(e){var t=new RegExp(r);t.test(e)&&(n=parseFloat(/[-,0-9,.]+/.exec(e)))}),n}I.addEventListener("pointerdown",function(e){b.setPointerCapture(e.pointerId),I.style.transition="none",I.style.userSelect="none",I.style.touchAction="none",S={prevDiameter:0,prevRotate:0,currentPositionX:parseInt(/[-,0-9]+/.exec(b.style.left),10)||0,currentScale:r("scale")||1,currentRotate:r("rotate")||0};var t={pointerId:e.pointerId,prevX:e.x,prevY:e.y,x:e.x,y:e.y};q.push(t)}),b.addEventListener("pointermove",function(t){if(S){var e=q.findIndex(function(e){return e.pointerId===t.pointerId});if(1===q.length){var r=S,n=r.currentPositionX,i=q[0].prevX,a=t.x,o=a-i,s=n+o,c=I.getBoundingClientRect().width,l=b.getBoundingClientRect().width,u=c-l,d=u-(I.clientWidth-b.clientWidth)+.01;s+d/2<u?s=u-d/2:0<s+d/2&&(s=0-d/2),b.style.left=s+"px",q[0].prevX=a,S.currentPositionX=s}else if(2===q.length){var p=0===e?1:0,m=q[p],f=m.x-t.x,v=m.y-t.y,y=Math.sqrt(Math.pow(f,2)+Math.pow(v,2));if(q[e].x=t.x,q[e].y=t.y,t.pointerId===q[1].pointerId){var h=180/Math.PI;f=t.x-m.x+.1,v=t.y-m.y;var g=Math.atan(-f/v);if(v<0&&(g+=Math.PI),(g*=h)<0&&(g=360+g),0!==S.prevRotate){300<Math.abs(S.prevRotate-g)&&(S.prevRotate=g);var T=S.prevRotate-g,_=S.currentRotate-T;(x+=5*_/18e3)<.5?x=.5:5.5<x&&(x=5.5),b.style.filter="brightness("+x+")",L.innerHTML=Math.round(100*(x-.5)/5),S.currentRotate=_}S.prevRotate=g}if(0!==S.prevRotate&&0!==S.prevDiameter){var C=S.prevDiameter-y,M=S.currentScale-C/100;M<1?M=1:10<M&&(M=10),5<Math.abs(C)&&(b.style.transform="scale("+M+")",H.innerHTML=Math.round(100*(M-1)/9),S.currentScale=M)}S.prevDiameter=y}}});var n=function(t){q=q.filter(function(e){return e.pointerId!==t.pointerId}),S=null};b.addEventListener("pointerup",n),b.addEventListener("pointercancel",n)}},{}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getTemplateContent=function(e){var t=document.getElementsByClassName(e)[0];return document.importNode(t.content,!0)},r.getImageHtml=function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return"jpg"!==t&&"png"!==t?'<img src="./assets/'+e+"."+t+'" class="'+r+'" alt="'+(null!=n?n:e)+'"/>':'<img src="./assets/'+e+"."+t+'" class="'+r+'"\n      srcset="\n      ./assets/'+e+"."+t+" 1x,\n      ./assets/"+e+"-x2."+t+" 2x,\n      ./assets/"+e+"-x3."+t+' 3x"\n      alt="'+(null!=n?n:e)+'"\n      />'},r.getTruncateHandler=function(e){var n=e.innerHTML,i=e;return function(){var e=document.createElement("div");e.style.position="absolute",e.style.visibility="hidden",e.style.width=i.clientWidth-16+"px",e.style.fontSize=window.getComputedStyle(i).fontSize,e.innerHTML="test <br/> text",document.body.appendChild(e);for(var t=e.clientHeight,r=(e.innerHTML=n).length-1;0<=r&&e.clientHeight>t;--r)e.innerHTML=n.substring(0,r)+"...";i.innerHTML=e.innerHTML}}},{}],7:[function(e,t,r){t.exports={events:[{type:"info",title:"Еженедельный отчет по расходам ресурсов",source:"Сенсоры потребления",time:"19:00, Сегодня",description:"Так держать! За последнюю неделю вы потратили на 10% меньше ресурсов, чем неделей ранее.",icon:"stats",data:{type:"graph",values:[{electricity:[["1536883200",115],["1536969600",117],["1537056000",117.2],["1537142400",118],["1537228800",120],["1537315200",123],["1537401600",129]]},{water:[["1536883200",40],["1536969600",40.2],["1537056000",40.5],["1537142400",41],["1537228800",41.4],["1537315200",41.9],["1537401600",42.6]]},{gas:[["1536883200",13],["1536969600",13.2],["1537056000",13.5],["1537142400",13.7],["1537228800",14],["1537315200",14.2],["1537401600",14.5]]}]},size:"l"},{type:"info",title:"Дверь открыта",source:"Сенсор входной двери",time:"18:50, Сегодня",description:null,icon:"key",size:"s"},{type:"info",title:"Уборка закончена",source:"Пылесос",time:"18:45, Сегодня",description:null,icon:"robot-cleaner",size:"s"},{type:"info",title:"Новый пользователь",source:"Роутер",time:"18:45, Сегодня",description:null,icon:"router",size:"s"},{type:"info",title:"Изменен климатический режим",source:"Сенсор микроклимата",time:"18:30, Сегодня",description:"Установлен климатический режим «Фиджи»",icon:"thermal",size:"m",data:{temperature:24,humidity:80}},{type:"critical",title:"Невозможно включить кондиционер",source:"Кондиционер",time:"18:21, Сегодня",description:"В комнате открыто окно, закройте его и повторите попытку",icon:"ac",size:"m"},{type:"info",title:"Музыка включена",source:"Яндекс.Станция",time:"18:16, Сегодня",description:"Сейчас проигрывается:",icon:"music",size:"m",data:{albumcover:"https://avatars.yandex.net/get-music-content/193823/1820a43e.a.5517056-1/m1000x1000",artist:"Florence & The Machine",track:{name:"Big God",length:"4:31"},volume:80}},{type:"info",title:"Заканчивается молоко",source:"Холодильник",time:"17:23, Сегодня",description:"Кажется, в холодильнике заканчивается молоко. Вы хотите добавить его в список покупок?",icon:"fridge",size:"m",data:{buttons:["Да","Нет"]}},{type:"info",title:"Зарядка завершена",source:"Оконный сенсор",time:"16:22, Сегодня",description:"Ура! Устройство «Оконный сенсор» снова в строю!",icon:"battery",size:"s"},{type:"critical",title:"Пылесос застрял",source:"Сенсор движения",time:"16:17, Сегодня",description:"Робопылесос не смог сменить свое местоположение в течение последних 3 минут. Похоже, ему нужна помощь.",icon:"cam",data:{image:"robot-cleaner.png"},size:"l"},{type:"info",title:"Вода вскипела",source:"Чайник",time:"16:20, Сегодня",description:null,icon:"kettle",size:"s"}]}},{}],8:[function(e,t,r){"use strict";var n,i=e("./blocks/Card/Card"),a=e("./blocks/_helpers/_events"),o=(n=a)&&n.__esModule?n:{default:n},s=e("./blocks/_helpers/_helpers");var c=e("./data/events.json");window.onload=function(){var t=document.querySelector(".PageContent-ContentGrid");Boolean("ontouchstart"in window)&&document.querySelector("body").classList.add("touch"),c.events.forEach(function(e){(0,i.render)(t,e)});var r=[];Array.from(t.querySelectorAll(".Title-Content")).forEach(function(e){var t=(0,s.getTruncateHandler)(e);t(),r.push(t)});var e,n=t.querySelector(".Card-Data_type_image img");(0,o.default)(n.parentNode,n),e=void 0,window.addEventListener("resize",function(){e||(e=setTimeout(function(){e=null,r.forEach(function(e){e()})},66))},!1)}},{"./blocks/Card/Card":1,"./blocks/_helpers/_events":5,"./blocks/_helpers/_helpers":6,"./data/events.json":7}]},{},[8]);