!function a(o,l,s){function c(t,e){if(!l[t]){if(!o[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(u)return u(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=l[t]={exports:{}};o[t][0].call(i.exports,function(e){return c(o[t][1][e]||e)},i,i.exports,a,o,l,s)}return l[t].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)c(s[e]);return c}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.render=i;var u=e("../_helpers/_helpers"),d=n(e("../ConfirmButtonsWidget/ConfirmButtonsWidget")),p=n(e("../ThermalWidget/ThermalWidget")),m=n(e("../MusicWidget/MusicWidget"));function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r,n,i=(0,u.getTemplateContent)("CardTemplate"),a=((n={}).main=(r=i).querySelector(".Article"),n.closeButton=r.querySelector(".Article-CloseButton"),n.nextButton=r.querySelector(".Article-NextButton"),n.icon=r.querySelector(".Title-IconWrapper"),n.title=r.querySelector(".Title-Content"),n.source=r.querySelector(".Article-Source"),n.time=r.querySelector(".Article-Time"),n.description=r.querySelector(".Article-Description"),n.data=r.querySelector(".Article-Data"),n);Object.keys(t).forEach(function(e){switch(e){case"type":a.main.classList.add("Article_type_"+t[e]);break;case"size":a.main.classList.add("Article_size_"+t[e]);break;case"icon":if("info"===t.type)a[e].innerHTML=(0,u.getImageHtml)(t[e],"svg","Title-Icon"),a.closeButton.innerHTML=(0,u.getImageHtml)("cross","svg","Article-CrossIcon","Закрыть");else{if("critical"!==t.type)throw Error("Data Error: не корректный тип события.");a[e].innerHTML=(0,u.getImageHtml)(t[e]+"-white","svg","Title-Icon"),a.closeButton.innerHTML=(0,u.getImageHtml)("cross-white","svg","Article-CrossIcon","Закрыть")}a.nextButton.innerHTML=(0,u.getImageHtml)("arrow","svg","Article-NextIcon","Дальше");break;default:if("data"!==e&&Object(t[e])!==t[e])a[e].textContent=t[e];else{if("data"!==e)throw Error("Data error: Не корректный формат данных.");!function(e,t){var r=e,n="graph"===t.type,i="image"in t&&"string"==typeof t.image,a="temperature"in t&&"humidity"in t,o="buttons"in t&&Array.isArray(t.buttons);switch(!0){case n:r.classList.add("Article-Data_type_graph"),r.innerHTML=(0,u.getImageHtml)("richdata","svg","DataImage","График");break;case i:var l=t.image.split("."),s=l[0],c=l[1];r.innerHTML='\n        <div class="Article-DataImageWrapper Article-Data_type_image">\n          '+(0,u.getImageHtml)(s,c,"DataImage")+'\n        </div>\n        <div class="DataInfo Article-DataInfoWrapper">\n          <div class="DataInfo-Zoom">Приближение: <span class="DataInfo-ZoomValue">0</span>%</div>\n          <div class="DataInfo-Light">Яркость: <span class="DataInfo-LightValue">10</span>%</div>\n        </div>\n      ';break;case a:(0,p.default)(r,t);break;case o:(0,d.default)(r,t);break;case"albumcover"in t&&"artist"in t&&"track"in t&&"volume"in t:(0,m.default)(r,t)}}(a.data,t.data)}}}),Object.keys(a).forEach(function(e){a[e].innerHTML.trim()||a[e].parentNode.removeChild(a[e])});var o=i.querySelector(".Article-Content");o.innerHTML.trim()||o.parentNode.removeChild(o);var l=document.importNode(i,!0);e.appendChild(l)}var a={render:i};r.default=a},{"../ConfirmButtonsWidget/ConfirmButtonsWidget":2,"../MusicWidget/MusicWidget":3,"../ThermalWidget/ThermalWidget":4,"../_helpers/_helpers":6}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};r.default=function(e,t){var r=(0,o.getTemplateContent)("ConfirmButtonsWidgetTemplate"),n=a(t.buttons,2);r.querySelector(".WidgetButton_type_confirm").innerHTML=n[0],r.querySelector(".WidgetButton_type_cancel").innerHTML=n[1];var i=document.importNode(r,!0);e.appendChild(i)};var o=e("../_helpers/_helpers")},{"../_helpers/_helpers":6}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r=(0,c.getTemplateContent)("MusicWidgetTemplate"),n=r.querySelector(".MusicWidget-AlbumImage"),i=r.querySelector(".MusicWidget-TrackArtist"),a=r.querySelector(".MusicWidget-TrackName"),o=r.querySelector(".MusicWidget-TrackDuration"),l=r.querySelector(".MusicWidget-VolumeValue");n.setAttribute("src",t.albumcover),i.innerHTML=t.artist,a.innerHTML=t.track.name,o.innerHTML=t.track.length,l.innerHTML=t.volume;var s=document.importNode(r,!0);e.appendChild(s)};var c=e("../_helpers/_helpers")},{"../_helpers/_helpers":6}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r=(0,i.getTemplateContent)("ThermalWidgetTemplate");r.querySelector(".ThermalWidget-TemperatureValue").innerHTML=t.temperature,r.querySelector(".ThermalWidget-HumidityValue").innerHTML=t.humidity;var n=document.importNode(r,!0);e.appendChild(n)};var i=e("../_helpers/_helpers")},{"../_helpers/_helpers":6}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var b=t,C=e,I=C.parentNode.querySelector(".DataInfo-ZoomValue"),H=C.parentNode.querySelector(".DataInfo-LightValue"),L=1,x=null,S=[];function r(r){var e=b.style.transform,n=null;return e.split(" ").forEach(function(e){var t=new RegExp(r);t.test(e)&&(n=parseFloat(/[-,0-9,.]+/.exec(e)))}),n}C.addEventListener("pointerdown",function(e){b.setPointerCapture(e.pointerId),C.style.transition="none",C.style.userSelect="none",C.style.touchAction="none",x={prevDiameter:0,prevRotate:0,currentPositionX:parseInt(/[-,0-9]+/.exec(b.style.left),10)||0,currentScale:r("scale")||1,currentRotate:r("rotate")||0};var t={pointerId:e.pointerId,startX:e.x,startY:e.y,prevX:e.x,prevY:e.y,x:e.x,y:e.y,startPositionX:parseInt(/[-,0-9]+/.exec(b.style.left),10)||0,startRotation:0,startScale:0};S.push(t)}),b.addEventListener("pointermove",function(t){if(x){var e=S.findIndex(function(e){return e.pointerId===t.pointerId});if(1===S.length){var r=x,n=r.currentPositionX,i=S[0].prevX,a=t.x,o=a-i,l=n+o,s=C.getBoundingClientRect().width-b.getBoundingClientRect().width-(C.clientWidth-b.clientWidth)+.01;C.getBoundingClientRect().width-b.getBoundingClientRect().width>l+s/2?l=C.getBoundingClientRect().width-b.getBoundingClientRect().width-s/2:0<l+s/2&&(l=0-s/2),b.style.left=l+"px",S[0].prevX=a,x.currentPositionX=l}else if(2===S.length){var c=0===e?1:0,u=S[c],d=u.x-t.x,p=u.y-t.y,m=Math.sqrt(Math.pow(d,2)+Math.pow(p,2));if(S[e].x=t.x,S[e].y=t.y,t.pointerId===S[1].pointerId){var f=180/Math.PI,v=u.x,g=u.y;d=t.x-v+.1,p=t.y-g;var y=Math.atan(-d/p);if(p<0&&(y+=Math.PI),(y*=f)<0&&(y=360+y),0!==x.prevRotate){300<Math.abs(x.prevRotate-y)&&(x.prevRotate=y);var h=x.prevRotate-y,T=x.currentRotate-h;(L+=5*T/18e3)<.5?L=.5:5.5<L&&(L=5.5),b.style.filter="brightness("+L+")",H.innerHTML=Math.round(100*(L-.5)/5),x.currentRotate=T}x.prevRotate=y}if(0!==x.prevRotate&&0!==x.prevDiameter){var _=x.prevDiameter-m,M=x.currentScale-_/100;M<1?M=1:10<M&&(M=10),5<Math.abs(_)&&(b.style.transform="scale("+M+")",I.innerHTML=Math.round(100*(M-1)/9),x.currentScale=M)}x.prevDiameter=m}}});var n=function(t){S=S.filter(function(e){return e.pointerId!==t.pointerId}),x=null};b.addEventListener("pointerup",n),b.addEventListener("pointercancel",n)}},{}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getTemplateContent=function(e){var t=document.getElementsByClassName(e)[0];return document.importNode(t.content,!0)},r.getImageHtml=function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return"jpg"!==t&&"png"!==t?'<img src="./assets/'+e+"."+t+'" class="'+r+'" alt="'+(null!=n?n:e)+'"/>':'<img src="./assets/'+e+"."+t+'" class="'+r+'"\n      srcset="\n      ./assets/'+e+"."+t+" 1x,\n      ./assets/"+e+"-x2."+t+" 2x,\n      ./assets/"+e+"-x3."+t+' 3x"\n      alt="'+(null!=n?n:e)+'"\n      />'},r.getTruncateHandler=function(e){var n=e.innerHTML,i=e;return function(){var e=document.createElement("div");e.style.position="absolute",e.style.visibility="hidden",e.style.width=i.clientWidth-16+"px",e.style.fontSize=window.getComputedStyle(i).fontSize,e.innerHTML="test <br/> text",document.body.appendChild(e);for(var t=e.clientHeight,r=(e.innerHTML=n).length-1;0<=r&&e.clientHeight>t;--r)e.innerHTML=n.substring(0,r)+"...";i.innerHTML=e.innerHTML}}},{}],7:[function(e,t,r){t.exports={events:[{type:"info",title:"Еженедельный отчет по расходам ресурсов",source:"Сенсоры потребления",time:"19:00, Сегодня",description:"Так держать! За последнюю неделю вы потратили на 10% меньше ресурсов, чем неделей ранее.",icon:"stats",data:{type:"graph",values:[{electricity:[["1536883200",115],["1536969600",117],["1537056000",117.2],["1537142400",118],["1537228800",120],["1537315200",123],["1537401600",129]]},{water:[["1536883200",40],["1536969600",40.2],["1537056000",40.5],["1537142400",41],["1537228800",41.4],["1537315200",41.9],["1537401600",42.6]]},{gas:[["1536883200",13],["1536969600",13.2],["1537056000",13.5],["1537142400",13.7],["1537228800",14],["1537315200",14.2],["1537401600",14.5]]}]},size:"l"},{type:"info",title:"Дверь открыта",source:"Сенсор входной двери",time:"18:50, Сегодня",description:null,icon:"key",size:"s"},{type:"info",title:"Уборка закончена",source:"Пылесос",time:"18:45, Сегодня",description:null,icon:"robot-cleaner",size:"s"},{type:"info",title:"Новый пользователь",source:"Роутер",time:"18:45, Сегодня",description:null,icon:"router",size:"s"},{type:"info",title:"Изменен климатический режим",source:"Сенсор микроклимата",time:"18:30, Сегодня",description:"Установлен климатический режим «Фиджи»",icon:"thermal",size:"m",data:{temperature:24,humidity:80}},{type:"critical",title:"Невозможно включить кондиционер",source:"Кондиционер",time:"18:21, Сегодня",description:"В комнате открыто окно, закройте его и повторите попытку",icon:"ac",size:"m"},{type:"info",title:"Музыка включена",source:"Яндекс.Станция",time:"18:16, Сегодня",description:"Сейчас проигрывается:",icon:"music",size:"m",data:{albumcover:"https://avatars.yandex.net/get-music-content/193823/1820a43e.a.5517056-1/m1000x1000",artist:"Florence & The Machine",track:{name:"Big God",length:"4:31"},volume:80}},{type:"info",title:"Заканчивается молоко",source:"Холодильник",time:"17:23, Сегодня",description:"Кажется, в холодильнике заканчивается молоко. Вы хотите добавить его в список покупок?",icon:"fridge",size:"m",data:{buttons:["Да","Нет"]}},{type:"info",title:"Зарядка завершена",source:"Оконный сенсор",time:"16:22, Сегодня",description:"Ура! Устройство «Оконный сенсор» снова в строю!",icon:"battery",size:"s"},{type:"critical",title:"Пылесос застрял",source:"Сенсор движения",time:"16:17, Сегодня",description:"Робопылесос не смог сменить свое местоположение в течение последних 3 минут. Похоже, ему нужна помощь.",icon:"cam",data:{image:"robot-cleaner.png"},size:"l"},{type:"info",title:"Вода вскипела",source:"Чайник",time:"16:20, Сегодня",description:null,icon:"kettle",size:"s"}]}},{}],8:[function(e,t,r){"use strict";var n,i=e("./blocks/Card/Card"),a=e("./blocks/_helpers/_events"),o=(n=a)&&n.__esModule?n:{default:n},l=e("./blocks/_helpers/_helpers");var s=e("./data/events.json");window.onload=function(){var t=document.querySelector(".PageContent-ContentGrid");Boolean("ontouchstart"in window)&&document.querySelector("body").classList.add("touch"),s.events.forEach(function(e){(0,i.render)(t,e)});var r=[];Array.from(t.querySelectorAll(".Title-Content")).forEach(function(e){var t=(0,l.getTruncateHandler)(e);t(),r.push(t)});var e,n=t.querySelector(".Article-Data_type_image img");(0,o.default)(n.parentNode,n),e=void 0,window.addEventListener("resize",function(){e||(e=setTimeout(function(){e=null,r.forEach(function(e){e()})},66))},!1)}},{"./blocks/Card/Card":1,"./blocks/_helpers/_events":5,"./blocks/_helpers/_helpers":6,"./data/events.json":7}]},{},[8]);